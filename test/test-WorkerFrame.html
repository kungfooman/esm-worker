<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Test</title>
        <script type="importmap">{"imports": {
            "browser-or-node":"https://unpkg.com/browser-or-node@2.1.1/src/index.js", 
            "@environment-safe/package" : "https://unpkg.com/@environment-safe/package@0.1.3/src/index.mjs",
            "module": "https://unpkg.com/browser-or-node@2.1.1/src/index.js",
            "node:events": "https://unpkg.com/extended-emitter@1.3.2/node-events.mjs",
            "path": "https://unpkg.com/browser-or-node@2.1.1/src/index.js",
            "esm-worker": "../src/index.mjs",
            "calculator": "./calculator.js"
        }}</script>
        <script type="module">
          import {Worker as WorkerFrame} from 'esm-worker';
          console.log("Got ESM Worker", Worker);
          const url = new URL('./test-worker-script.mjs', import.meta.url);
          const workerFrame = new WorkerFrame(url, {type: 'module', inheritMap: true});
          workerFrame.onmessage = (e) => {
            console.log("Got e.data", e.data);
          };
          window.workerFrame = workerFrame;
          console.log('window.workerFrame', window.workerFrame);
        </script>
    </head>
    <body>
      <button onclick="workerFrame.postMessage('aaa')">Send 'aaa'</button>
      <button>B</button>
      <button>C</button>
    </body>
</html>