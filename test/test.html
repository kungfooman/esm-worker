<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Test</title>
        <script type="importmap">{"imports": {
            "browser-or-node":"https://unpkg.com/browser-or-node@2.1.1/src/index.js", 
            "@environment-safe/package" : "https://unpkg.com/@environment-safe/package@0.1.3/src/index.mjs",
            "module": "https://unpkg.com/browser-or-node@2.1.1/src/index.js",
            "node:events": "https://unpkg.com/extended-emitter@1.3.2/node-events.mjs",
            "path": "https://unpkg.com/browser-or-node@2.1.1/src/index.js",
            "esm-worker": "../src/index.mjs",
            "calculator": "./calculator.js"
        }}</script>
        <script type="module">
          // WorkerFrame...
          import {Worker as WorkerFrame} from 'esm-worker';
          console.log("Got ESM Worker", Worker);
          const workerFrame = new WorkerFrame('./test-workerframe-script.js', {type: 'module', inheritMap: true});
          workerFrame.onmessage = (e) => {
            console.log("[workerFrame.onmessage] workerFrame got e.data", e.data);
          };
          workerFrame.addEventListener('message', (e) => {
            console.log("[workerFrame.addEventListener('message', cb)] workerFrame got e.data", e.data);
          });
          window.workerFrame = workerFrame;
          console.log('window.workerFrame', window.workerFrame);
          // Worker...
          const worker = new Worker('./test-worker-script.js', {type: 'module'});
          worker.onmessage = (e) => {
            console.log("[worker.onmessage] worker got e.data", e.data);
          };
          worker.addEventListener('message', (e) => {
            console.log("[worker.addEventListener('message', cb)] worker got e.data", e.data);
          });
          window.worker = worker;
          console.log('window.worker', window.worker);
        </script>
    </head>
    <body>
      <h1>worker</h1>
      <button onclick="worker.postMessage('aaa')">Send 'aaa'</button>
      <button>B</button>
      <button>C</button>
      <hr>
      <h1>workerFrame</h1>
      <button onclick="workerFrame.postMessage('aaa')">Send 'aaa'</button>
      <button>B</button>
      <button>C</button>
    </body>
</html>
